{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///Users/harshithj/Documents/Projects/PESU_EC_CSE_D_P25_Digital_Asset_and_Cryptocurrency_Portfolio_Tracker_Stash/src/lib/supabase/supabaseServer.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nconst SUPABASE_URL = process.env.SUPABASE_URL!;\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY!;\n\nif (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {\n  throw new Error(\"Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY env vars\");\n}\n\nexport const supabaseServer = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,eAAe,QAAQ,GAAG,CAAC,YAAY;AAC7C,MAAM,4BAA4B,QAAQ,GAAG,CAAC,yBAAyB;AAEvE,IAAI,CAAC,gBAAgB,CAAC,2BAA2B;IAC/C,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,iBAAiB,IAAA,uTAAY,EAAC,cAAc","debugId":null}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/harshithj/Documents/Projects/PESU_EC_CSE_D_P25_Digital_Asset_and_Cryptocurrency_Portfolio_Tracker_Stash/src/app/api/dashboard/%5Bid%5D/route.ts"],"sourcesContent":["// src/app/api/dashboard/[id]/route.ts\nimport { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\nimport { supabaseServer } from \"../../../../lib/supabase/supabaseServer\";\n\nexport async function GET(\n  req: NextRequest,\n  context: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await context.params;\n\n    // Fetch user profile\n    const { data: profile, error: profileErr } = await supabaseServer\n      .from(\"profiles\")\n      .select(\"id, full_name, email, avatar_url\")\n      .eq(\"id\", id)\n      .single();\n\n    if (profileErr) {\n      return NextResponse.json({ error: profileErr.message }, { status: 404 });\n    }\n\n    // Fetch user's crypto holdings (example table: holdings)\n    const { data: holdings, error: holdingsErr } = await supabaseServer\n      .from(\"holdings\")\n      .select(\"id, symbol, amount, avg_price, current_price\")\n      .eq(\"owner_id\", id);\n\n    if (holdingsErr) {\n      return NextResponse.json({ error: holdingsErr.message }, { status: 500 });\n    }\n\n    // compute some derived stats\n    const portfolioValue = holdings?.reduce((sum: number, h: any) => {\n      const current = Number(h.current_price ?? 0) * Number(h.amount ?? 0);\n      return sum + current;\n    }, 0) ?? 0;\n\n    const response = {\n      profile,\n      holdings,\n      stats: {\n        portfolioValue,\n        assetsCount: holdings?.length ?? 0,\n      },\n    };\n\n    return NextResponse.json(response);\n  } catch (err: any) {\n    return NextResponse.json({ error: err.message || \"Server error\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AACtC;AAEA;;;AAEO,eAAe,IACpB,GAAgB,EAChB,OAA4C;IAE5C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM,QAAQ,MAAM;QAEnC,qBAAqB;QACrB,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,mQAAc,CAC9D,IAAI,CAAC,YACL,MAAM,CAAC,oCACP,EAAE,CAAC,MAAM,IACT,MAAM;QAET,IAAI,YAAY;YACd,OAAO,8PAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,WAAW,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,yDAAyD;QACzD,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,mQAAc,CAChE,IAAI,CAAC,YACL,MAAM,CAAC,gDACP,EAAE,CAAC,YAAY;QAElB,IAAI,aAAa;YACf,OAAO,8PAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,YAAY,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,6BAA6B;QAC7B,MAAM,iBAAiB,UAAU,OAAO,CAAC,KAAa;YACpD,MAAM,UAAU,OAAO,EAAE,aAAa,IAAI,KAAK,OAAO,EAAE,MAAM,IAAI;YAClE,OAAO,MAAM;QACf,GAAG,MAAM;QAET,MAAM,WAAW;YACf;YACA;YACA,OAAO;gBACL;gBACA,aAAa,UAAU,UAAU;YACnC;QACF;QAEA,OAAO,8PAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAU;QACjB,OAAO,8PAAY,CAAC,IAAI,CAAC;YAAE,OAAO,IAAI,OAAO,IAAI;QAAe,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF","debugId":null}}]
}