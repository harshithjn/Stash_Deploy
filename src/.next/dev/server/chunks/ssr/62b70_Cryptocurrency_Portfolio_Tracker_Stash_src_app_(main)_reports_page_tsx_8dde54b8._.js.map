{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/harshithj/Documents/Projects/PESU_EC_CSE_D_P25_Digital_Asset_and_Cryptocurrency_Portfolio_Tracker_Stash/src/app/%28main%29/reports/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createClient } from \"../../../lib/supabase/supabaseClient\";\nimport { motion } from \"framer-motion\";\n\nexport default function ReportsPage() {\n  const supabase = createClient();\n  const [holdings, setHoldings] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return;\n      const { data } = await supabase\n        .from(\"holdings\")\n        .select(\"symbol, amount, avg_price, current_price\")\n        .eq(\"owner_id\", user.id);\n      setHoldings(data || []);\n      setLoading(false);\n    };\n    fetchData();\n  }, [supabase]);\n\n  const downloadCSV = () => {\n    const csv = [\n      [\"Symbol\", \"Amount\", \"Avg Price\", \"Current Price\"],\n      ...holdings.map((h) => [h.symbol, h.amount, h.avg_price, h.current_price]),\n    ]\n      .map((row) => row.join(\",\"))\n      .join(\"\\n\");\n\n    const blob = new Blob([csv], { type: \"text/csv\" });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"stash_portfolio_report.csv\";\n    a.click();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black text-white p-6\">\n      <div className=\"max-w-5xl mx-auto\">\n        <h1 className=\"text-3xl font-bold mb-6\">Reports & Exports</h1>\n\n        {loading ? (\n          <div className=\"text-gray-400 text-center\">Fetching report data...</div>\n        ) : holdings.length === 0 ? (\n          <div className=\"text-gray-500 text-center\">No holdings to export.</div>\n        ) : (\n          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n            <div className=\"overflow-x-auto mb-6\">\n              <table className=\"w-full text-left text-gray-300\">\n                <thead className=\"text-gray-500 text-sm border-b border-gray-800\">\n                  <tr>\n                    <th className=\"py-3\">Asset</th>\n                    <th className=\"py-3\">Amount</th>\n                    <th className=\"py-3\">Avg Price</th>\n                    <th className=\"py-3\">Current Price</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {holdings.map((h, i) => (\n                    <tr key={i} className=\"border-b border-gray-900\">\n                      <td className=\"py-3 font-semibold\">{h.symbol}</td>\n                      <td className=\"py-3\">{h.amount}</td>\n                      <td className=\"py-3\">${h.avg_price}</td>\n                      <td className=\"py-3\">${h.current_price}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            <button\n              onClick={downloadCSV}\n              className=\"w-full p-3 bg-white text-black rounded-xl font-semibold hover:bg-gray-200 transition\"\n            >\n              Download as CSV\n            </button>\n\n            {message && (\n              <p className=\"text-center mt-4 text-sm text-gray-400\">{message}</p>\n            )}\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,WAAW,IAAA,+PAAY;IAC7B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+TAAQ,EAAQ,EAAE;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+TAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+TAAQ,EAAC;IAEvC,IAAA,gUAAS,EAAC;QACR,MAAM,YAAY;YAChB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;YACX,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,YACL,MAAM,CAAC,4CACP,EAAE,CAAC,YAAY,KAAK,EAAE;YACzB,YAAY,QAAQ,EAAE;YACtB,WAAW;QACb;QACA;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,cAAc;QAClB,MAAM,MAAM;YACV;gBAAC;gBAAU;gBAAU;gBAAa;aAAgB;eAC/C,SAAS,GAAG,CAAC,CAAC,IAAM;oBAAC,EAAE,MAAM;oBAAE,EAAE,MAAM;oBAAE,EAAE,SAAS;oBAAE,EAAE,aAAa;iBAAC;SAC1E,CACE,GAAG,CAAC,CAAC,MAAQ,IAAI,IAAI,CAAC,MACtB,IAAI,CAAC;QAER,MAAM,OAAO,IAAI,KAAK;YAAC;SAAI,EAAE;YAAE,MAAM;QAAW;QAChD,MAAM,MAAM,OAAO,GAAG,CAAC,eAAe,CAAC;QACvC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG;QACb,EAAE,KAAK;IACT;IAEA,qBACE,4VAAC;QAAI,WAAU;kBACb,cAAA,4VAAC;YAAI,WAAU;;8BACb,4VAAC;oBAAG,WAAU;8BAA0B;;;;;;gBAEvC,wBACC,4VAAC;oBAAI,WAAU;8BAA4B;;;;;2BACzC,SAAS,MAAM,KAAK,kBACtB,4VAAC;oBAAI,WAAU;8BAA4B;;;;;yCAE3C,4VAAC,oLAAM,CAAC,GAAG;oBAAC,SAAS;wBAAE,SAAS;oBAAE;oBAAG,SAAS;wBAAE,SAAS;oBAAE;;sCACzD,4VAAC;4BAAI,WAAU;sCACb,cAAA,4VAAC;gCAAM,WAAU;;kDACf,4VAAC;wCAAM,WAAU;kDACf,cAAA,4VAAC;;8DACC,4VAAC;oDAAG,WAAU;8DAAO;;;;;;8DACrB,4VAAC;oDAAG,WAAU;8DAAO;;;;;;8DACrB,4VAAC;oDAAG,WAAU;8DAAO;;;;;;8DACrB,4VAAC;oDAAG,WAAU;8DAAO;;;;;;;;;;;;;;;;;kDAGzB,4VAAC;kDACE,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,4VAAC;gDAAW,WAAU;;kEACpB,4VAAC;wDAAG,WAAU;kEAAsB,EAAE,MAAM;;;;;;kEAC5C,4VAAC;wDAAG,WAAU;kEAAQ,EAAE,MAAM;;;;;;kEAC9B,4VAAC;wDAAG,WAAU;;4DAAO;4DAAE,EAAE,SAAS;;;;;;;kEAClC,4VAAC;wDAAG,WAAU;;4DAAO;4DAAE,EAAE,aAAa;;;;;;;;+CAJ/B;;;;;;;;;;;;;;;;;;;;;sCAWjB,4VAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;wBAIA,yBACC,4VAAC;4BAAE,WAAU;sCAA0C;;;;;;;;;;;;;;;;;;;;;;;AAOrE","debugId":null}}]
}