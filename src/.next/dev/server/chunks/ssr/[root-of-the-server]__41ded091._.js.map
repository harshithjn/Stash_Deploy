{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/harshithj/Documents/Projects/PESU_EC_CSE_D_P25_Digital_Asset_and_Cryptocurrency_Portfolio_Tracker_Stash/src/app/%28main%29/dashboard/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useParams } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { motion } from \"framer-motion\";\n\ntype Holding = {\n  id: string;\n  symbol: string;\n  amount: number;\n  avg_price: number;\n  current_price: number;\n};\n\nexport default function DashboardPage() {\n  const { id } = useParams();\n  const [data, setData] = useState<null | {\n    profile: any;\n    holdings: Holding[];\n    stats: { portfolioValue: number; assetsCount: number };\n  }>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!id) return;\n    setLoading(true);\n    setError(null);\n\n    fetch(`/api/dashboard/${id}`)\n      .then(async (res) => {\n        if (!res.ok) {\n          const err = await res.json().catch(() => ({}));\n          throw new Error(err?.error || `Failed (${res.status})`);\n        }\n        return res.json();\n      })\n      .then((json) => setData(json))\n      .catch((e) => setError(e.message))\n      .finally(() => setLoading(false));\n  }, [id]);\n\n  return (\n    <div className=\"max-w-6xl mx-auto\">\n      {/* Main */}\n      <main className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Profile + Stats */}\n        <section className=\"lg:col-span-1 space-y-6\">\n          {/* Profile Card */}\n          <motion.div\n            initial={{ opacity: 0, y: 8 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"p-6 bg-[#0b0b0b] border border-gray-800 rounded-2xl\"\n          >\n            {loading ? (\n              <div className=\"animate-pulse space-y-2\">\n                <div className=\"h-6 bg-gray-800 rounded w-2/3\" />\n                <div className=\"h-4 bg-gray-800 rounded w-1/2\" />\n              </div>\n            ) : error ? (\n              <div className=\"text-red-500\">Error: {error}</div>\n            ) : (\n              <div className=\"flex gap-4 items-center\">\n                <div className=\"w-14 h-14 rounded-full bg-gray-900 flex items-center justify-center text-white text-lg\">\n                  {data?.profile?.full_name?.[0]?.toUpperCase() ?? \"U\"}\n                </div>\n                <div>\n                  <div className=\"font-semibold text-lg\">{data?.profile?.full_name}</div>\n                  <div className=\"text-sm text-gray-400\">{data?.profile?.email}</div>\n                  <div className=\"text-xs text-gray-500 mt-2\">ID: {data?.profile?.id}</div>\n                </div>\n              </div>\n            )}\n          </motion.div>\n\n          {/* Portfolio Card */}\n          <motion.div\n            initial={{ opacity: 0, y: 8 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.05 }}\n            className=\"p-6 bg-[#0b0b0b] border border-gray-800 rounded-2xl\"\n          >\n            <h3 className=\"text-sm text-gray-400 mb-3\">Portfolio</h3>\n            {loading ? (\n              <div className=\"space-y-2 animate-pulse\">\n                <div className=\"h-8 bg-gray-800 rounded\" />\n                <div className=\"h-6 bg-gray-800 rounded w-2/3\" />\n              </div>\n            ) : (\n              <div>\n                <div className=\"text-3xl font-bold\">\n                  ${Number(data?.stats.portfolioValue ?? 0).toLocaleString(undefined, { maximumFractionDigits: 2 })}\n                </div>\n                <div className=\"text-sm text-gray-400 mt-2\">\n                  {data?.stats.assetsCount} assets\n                </div>\n              </div>\n            )}\n          </motion.div>\n        </section>\n\n        {/* Holdings Table */}\n        <section className=\"lg:col-span-2\">\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"p-6 bg-[#0b0b0b] border border-gray-800 rounded-2xl\"\n          >\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-lg font-semibold\">Holdings</h2>\n              <div className=\"text-sm text-gray-400\">Live Prices</div>\n            </div>\n\n            {loading ? (\n              <div className=\"space-y-3\">\n                {Array.from({ length: 4 }).map((_, i) => (\n                  <div key={i} className=\"h-14 bg-gray-900 rounded animate-pulse\" />\n                ))}\n              </div>\n            ) : error ? (\n              <div className=\"text-red-500\">Error: {error}</div>\n            ) : (data?.holdings?.length ?? 0) === 0 ? (\n              <div className=\"text-gray-500\">No holdings yet.</div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-left text-gray-300\">\n                  <thead className=\"text-gray-500 text-sm border-b border-gray-800\">\n                    <tr>\n                      <th className=\"py-3\">Asset</th>\n                      <th className=\"py-3\">Amount</th>\n                      <th className=\"py-3\">Avg Price</th>\n                      <th className=\"py-3\">Current Price</th>\n                      <th className=\"py-3\">Value</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {data!.holdings.map((h) => {\n                      const value = Number(h.amount) * Number(h.current_price);\n                      return (\n                        <tr key={h.id} className=\"border-b border-gray-900 hover:bg-gray-900 transition\">\n                          <td className=\"py-4 font-semibold\">{h.symbol}</td>\n                          <td className=\"py-4\">{h.amount}</td>\n                          <td className=\"py-4\">${h.avg_price.toFixed(2)}</td>\n                          <td className=\"py-4\">${h.current_price.toFixed(2)}</td>\n                          <td className=\"py-4 font-semibold\">${value.toFixed(2)}</td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </motion.div>\n        </section>\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}